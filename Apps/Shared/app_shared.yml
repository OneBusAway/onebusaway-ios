name: OBAKit

############
# Options
############

settings:
  base:
    MARKETING_VERSION: 25.4.2

options:
  minimumXcodeGenVersion: 2.42
  generateEmptyDirectories: true
  groupSortPosition: top
  deploymentTarget:
    iOS: "18.0"

############
# App
############

targets:
  App:
    type: application
    platform: iOS
    dependencies:
      - target: OBAKitCore
      - target: OBAKit
      - target: OBAWidget
    info:
      properties:
        CFBundleShortVersionString: "$(MARKETING_VERSION)"
        CFBundleLocalizations:
          - en
          - es
          - it
          - pl
          - zh-Hans
        ITSAppUsesNonExemptEncryption: false
        LSApplicationQueriesSchemes:
          - fb
          - twitter
          - comgooglemaps
        NSLocationWhenInUseUsageDescription: See where you are in relation to transit, and help you navigate more easily.
        NSLocationTemporaryUsageDescriptionDictionary:
          MapStatusView: See where you are in relation to transit, and help you navigate more easily.
        UILaunchStoryboardName: LaunchScreen
        UIRequiredDeviceCapabilities:
          - armv7
        UISupportedInterfaceOrientations:
          - UIInterfaceOrientationPortrait
          - UIInterfaceOrientationLandscapeLeft
          - UIInterfaceOrientationLandscapeRight
          - UIInterfaceOrientationPortraitUpsideDown
    preBuildScripts:
      - name: Versioning
        script: "${PROJECT_DIR}/scripts/version"
        runOnlyWhenInstalling: true         # For SwiftUI Xcode Previews.
    scheme:
      gatherCoverageData: true
      testTargets:
        - name: OBAKitTests
          parallelizable: false
          randomExecutionOrder: true
    settings:
      base:
        CLANG_ANALYZER_LOCALIZABILITY_NONLOCALIZED: true
        CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER: false
        OTHER_LDFLAGS: -ObjC
        ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME: "AccentColor"
      configs:
        Debug:
          DEBUG_INFORMATION_FORMAT: dwarf
        Release:
          DEBUG_INFORMATION_FORMAT: dwarf-with-dsym

packages:
    BLTNBoard:
        url: https://github.com/alexaubry/BulletinBoard.git
        exactVersion: 5.0.0
    Eureka:
        url: https://github.com/xmartlabs/Eureka.git
        exactVersion: 5.5.0
    FloatingPanel:
        url: https://github.com/SCENEE/FloatingPanel.git
        exactVersion: 3.0.1
    Hyperconnectivity:
        url: https://github.com/rwbutler/Hyperconnectivity.git
        exactVersion: 1.2.0
    MarqueeLabel:
        url: https://github.com/cbpowell/MarqueeLabel.git
        exactVersion: 4.5.3
    OTPKit:
        url: https://github.com/OneBusAway/otpkit.git
        minVersion: 0.5.0
        maxVersion: 1.0.0
    SwiftProtobuf:
        url: https://github.com/apple/swift-protobuf.git
        minorVersion: 1.32.0
